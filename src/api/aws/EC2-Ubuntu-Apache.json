{"k":"EC2-Ubuntu-Apache","t":"EC2 Ubuntu 安裝 Apache","i":"2020-03-17","a":[{"e":"h2","t":"假設"},{"e":"ul","s":[{"e":"li","s":[{"e":"span","t":"以下操作先做假設"},{"e":"ul","s":[{"e":"li","s":[{"e":"span","t":"Elastic IPs："},{"e":"code","t":"123.456.789"}]},{"e":"li","s":[{"e":"span","t":"下載的 .pem 檔案名稱："},{"e":"code","t":"test.pem"}]},{"e":"li","s":[{"e":"code","t":"test.pem"},{"e":"span","t":" 位置："},{"e":"code","t":"/User/oa/test.pem"}]},{"e":"li","s":[{"e":"span","t":"網址(domain)："},{"e":"code","t":"your.url.tw"}]},{"e":"li","s":[{"e":"span","t":"E-Mail："},{"e":"code","t":"your.email@gmail.com"}]},{"e":"li","s":[{"e":"span","t":"以下編輯器主要是使用 "},{"e":"code","t":"nano"},{"e":"span","t":"，請自行斟酌是否使用 "},{"e":"code","t":"vi"},{"e":"span","t":" 或 "},{"e":"code","t":"vim"}]}]}]}]},{"e":"blockquote","s":[{"e":"p","s":[{"e":"span","t":"記得去你的 DNS(Domain Name Server) 設定，新增 "},{"e":"code","t":"A"},{"e":"span","t":" 紀錄 "},{"e":"code","t":"your.url.tw"},{"e":"span","t":"，指向 IP "},{"e":"code","t":"123.456.789"}]}]},{"e":"h2","t":"安裝 Apache"},{"e":"ul","s":[{"e":"li","s":[{"e":"span","t":"更新 apt，指令："},{"e":"code","t":"sudo apt update"}]},{"e":"li","s":[{"e":"span","t":"安裝 Apache，指令："},{"e":"code","t":"sudo apt install apache2"},{"e":"span","t":"，一樣會問你 "},{"e":"code","t":"Do you want to continue? [Y/n]"},{"e":"span","t":"，按下 "},{"e":"code","t":"Y"},{"e":"span","t":" 後 "},{"e":"code","t":"enter"},{"e":"span","t":" 即可。"}]}]},{"e":"h2","t":"建立 WWW 目錄"},{"e":"ul","s":[{"e":"li","s":[{"e":"span","t":"預設目錄在 "},{"e":"code","t":"/var/www"},{"e":"span","t":"，先將其權限做調整，輸入指令："},{"e":"code","t":"sudo chmod -R 777 /var/www"}]},{"e":"li","s":[{"e":"span","t":"進入預設 www 目錄，輸入指令："},{"e":"code","t":"cd /var/www"}]},{"e":"li","s":[{"e":"span","t":"移除 "},{"e":"code","t":"html"},{"e":"span","t":" 目錄，指令："},{"e":"code","t":"rm -rf html"}]},{"e":"li","s":[{"e":"span","t":"新增 index.html，編輯檔案，輸入指令："},{"e":"code","t":"nano index.html"},{"e":"span","t":"，簡單的輸入 "},{"e":"code","t":"Hello World！"},{"e":"span","t":" 後儲存離開。"}]},{"e":"li","s":[{"e":"span","t":"在 Home 下建立捷徑，指令 "},{"e":"code","t":"ln -s /var/www ~/www"}]}]},{"e":"h2","t":"設定 Apache"},{"e":"ul","s":[{"e":"li","s":[{"e":"p","s":[{"e":"span","t":"啟動 Apache，指令："},{"e":"code","t":"sudo service apache2 start"},{"e":"span","t":"，然後開啟你的網頁檢查有沒有成功，網頁網址輸入 "},{"e":"code","t":"your.url.tw"},{"e":"span","t":"，也就是 "},{"e":"code","t":"http://your.url.tw/"},{"e":"span","t":"，如果可以開啟就代表 Apache 安裝成功。"}]}]},{"e":"li","s":[{"e":"p","t":"筆記 apache2 指令："},{"e":"ul","s":[{"e":"li","s":[{"e":"span","t":"啟動："},{"e":"code","t":"sudo service apache2 start"}]},{"e":"li","s":[{"e":"span","t":"停止："},{"e":"code","t":"sudo service apache2 stop"}]},{"e":"li","s":[{"e":"span","t":"重啟："},{"e":"code","t":"sudo service apache2 restart"}]}]}]},{"e":"li","s":[{"e":"p","s":[{"e":"span","t":"複製一份 vhost 檔案，指令 "},{"e":"code","t":"sudo cp /etc/apache2/sites-available/000-default.conf /etc/apache2/sites-available/my.conf"}]}]},{"e":"li","s":[{"e":"p","s":[{"e":"span","t":"啟用 "},{"e":"code","t":"my.conf"},{"e":"span","t":"，指令："},{"e":"code","t":"sudo a2ensite my.conf"}]}]},{"e":"li","s":[{"e":"p","s":[{"e":"span","t":"重新載入 Apache 設定，指令："},{"e":"code","t":"sudo systemctl reload apache2"}]}]},{"e":"li","s":[{"e":"p","s":[{"e":"span","t":"關閉 "},{"e":"code","t":"000-default.conf"},{"e":"span","t":"，指令 "},{"e":"code","t":"sudo a2dissite 000-default.conf"},{"e":"span","t":"，注意喔，指令是 "},{"e":"code","t":"a2dissite"}]}]},{"e":"li","s":[{"e":"p","s":[{"e":"span","t":"重新載入 Apache 設定，指令："},{"e":"code","t":"sudo systemctl reload apache2"}]}]},{"e":"li","s":[{"e":"p","s":[{"e":"span","t":"編輯 "},{"e":"code","t":"my.conf"},{"e":"span","t":"，指令："},{"e":"code","t":"sudo nano /etc/apache2/sites-available/my.conf"},{"e":"span","t":"，可以用以下當範例："}]}]}]},{"e":"pre","s":[{"e":"code","t":"&lt;VirtualHost *:80&gt;\n  # 你的 Domain\n  ServerName your.url.tw\n  ServerAlias your.url.tw\n\n  # 你的 E-Mail\n  ServerAdmin your.email@gmail.com\n\n  # 你的專案目錄\n  DocumentRoot /var/www\n\n  # Log 的儲存位置\n  ErrorLog ${APACHE_LOG_DIR}/error.log\n  CustomLog ${APACHE_LOG_DIR}/access.log combined\n\n  # 記得也要是你的專案目錄\n  &lt;Directory /var/www&gt;\n      Options FollowSymLinks MultiViews\n      AllowOverride All\n      Order allow,deny\n      Allow from all\n  &lt;/Directory&gt;\n&lt;/VirtualHost&gt;"}]},{"e":"ul","s":[{"e":"li","s":[{"e":"span","t":"重啟 Apache 即可，指令："},{"e":"code","t":"sudo service apache2 restart"}]}]},{"e":"h2","t":"打開 rewrite mode"},{"e":"ul","s":[{"e":"li","s":[{"e":"span","t":"指令輸入 "},{"e":"code","t":"sudo a2enmod rewrite"}]},{"e":"li","s":[{"e":"span","t":"重新開啟 "},{"e":"code","t":"sudo service apache2 restart"}]}]},{"e":"h2","t":"以上參考："},{"e":"ul","s":[{"e":"li","s":[{"e":"p","s":[{"e":"a","attr":{"href":"http://comdan66.github.io/configs/book/mds/ec2-ubuntu/apache.html","target":"_blank"},"t":"http://comdan66.github.io/configs/book/mds/ec2-ubuntu/apache.html"}]}]},{"e":"li","s":[{"e":"p","s":[{"e":"a","attr":{"href":"https://note.artchiu.org/2016/06/17/lets-encrypt-%E4%BD%BF%E7%94%A8%E8%AA%AA%E6%98%8E-%E9%9D%9E%E5%AE%98%E6%96%B9/","target":"_blank"},"t":"https://note.artchiu.org/2016/06/17/lets-encrypt-%E4%BD%BF%E7%94%A8%E8%AA%AA%E6%98%8E-%E9%9D%9E%E5%AE%98%E6%96%B9/"}]}]}]}],"r":[],"g":["AWS","EC2","Apache","http"]}