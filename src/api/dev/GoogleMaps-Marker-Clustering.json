{
  "title":"Google Maps 標記叢集 Marker Clustering",
  "subtitle":"各位 Google 地圖 玩家都應該有過當 Marker 太多時，視角一拉遠後全部 Marker 擠在一起的困擾吧！沒錯 OA's Marker Clustering 就是要來處理這個困擾！",
  "at":"2016-10-03",
  "type":"article",
  "els":[
    {
      "e":"p",
      "s":[
        { "e":"span", "t":"各位 " },
        { "e":"a", "t":"Google 地圖", "href":"https://developers.google.com/maps/documentation/javascript/tutorial?hl=zh-tw" },
        { "e":"span", "t":" 玩家都應該有過當 " },
        { "e":"a", "t":"Marker", "href":"https://developers.google.com/maps/documentation/javascript/markers?hl=zh-tw" },
        { "e":"span", "t":" 太多時，視角一拉遠後全部 Marker 擠在一起的困擾吧！沒錯 " },
        { "e":"a", "t":"OA's Marker Clustering", "href":"https://github.com/comdan66/OA-markerClustering" },
        { "e":"span", "t":" 就是要來處理這個困擾！網路上也有很多關於 Marker Clustering 的 Library，但想要比較能夠掌握概況以及視需求去做調整功能，所以刻了一套可以自訂 Marker Clustering 的地圖工具。" }
      ]
    },
    { "e":"p", "t":"或許你/妳會問，市面上也有很多關於 Marker Clustering 的 Library，那又何必自己時做一套呢！？原因很簡單，因為自己做的比較能夠掌握概況，視需求去做調整，不用一大包的 code，到底怎麼跑的都摸不透，並且加以利用做出自己想要的功能！" },
    {
      "e":"p",
      "s":[
        { "e":"span", "t":"如果試著 Google 關於 " },
        { "e":"a", "t":"Marker Clustering", "href":"https://developers.google.com/maps/documentation/javascript/marker-clustering" },
        { "e":"span", "t":" 的文章都會找到 Marker Clustering 此篇，而官網上也都推崇" },
        { "e":"a", "t":"這套", "href":"https://github.com/googlemaps/js-marker-clusterer" },
        { "e":"span", "t":" Library，這套我也開發過，甚至改過其功能，但是最後我還是自己刻了屬於自己的 " },
        { "e":"a", "t":"Marker Clustering", "href":"https://works.ioa.tw/OA-markerClustering/index.html" },
        { "e":"span", "t":" 來制定當不同的 集合 Marker 時可以使用不同呈現方式！以下就是一些功能介紹、演算方法說明。" }
      ]
    },
    { "e":"h2", "t":"概略方法" },
    {
      "e":"p",
      "s":[
        { "e":"a", "t":"OA's Marker Clustering", "href":"https://works.ioa.tw/OA-markerClustering/index.html" },
        { "e":"span", "t":" 主要規則就是利用 Google Maps 在不同的放大視角(以下以 zoom 代稱)時產生 " },
        { "e":"b", "t":"集合 Marker" },
        { "e":"span", "t":"，而這些 Marker 用來代表著是多數 Marker 集合。如下圖 1 是 zoom 為 16 時的狀況圖，地圖上分別有 A、B 以及 C 三個點，而圖 2 代表在 zoom 為 13 時，因為地圖視角拉遠了，所以造成 A 與 B 互相太靠近，所以必須隱藏 B 只顯示 A，所以作法如圖 3，產生一個 集合 Marker 放置在 A 的位置，並且記錄著數量為 2。" }
      ]
    },
    { "e":"img", "alt":"zoom 為 16 時的狀況圖，地圖上分別有 A、B 以及 C 三個點", "src":"/img/dev/GoogleMaps-Marker-Clustering/9190dca50dbba113005516d63bda5275.png" },
    { "e":"img", "alt":"地圖視角 zoom 為 13 時，因為視角拉遠所以造成 A 與 B 互相太靠近", "src":"/img/dev/GoogleMaps-Marker-Clustering/0439d416ff167cd08d4157d335b57b4d.png" },
    { "e":"img", "alt":"因靠太近，故隱藏 B 只顯示 A，產生一個 集合 Marker 放置在 A 的位置，並且記錄著數量為 2", "src":"/img/dev/GoogleMaps-Marker-Clustering/32743d52503d5fb6ba8442f6bf18a4b6.png" },
    {
      "e":"p",
      "s":[
        { "e":"span", "t":"這次的 " },
        { "e":"a", "t":"OA's Marker Clustering", "href":"https://works.ioa.tw/OA-markerClustering/index.html" },
        { "e":"span", "t":" 中，我拆出兩種 Type，分別是 " },
        { "e":"b", "t":"moveRun" },
        { "e":"span", "t":"、" },
        { "e":"b", "t":"runAll" },
        { "e":"span", "t":"，其兩者在地圖上的呈現結果差不多，但方法是不一樣的。前者 moveRun 是當地圖移動完後(idle Listener)，先取得地圖的範圍座標 " },
        { "e":"a", "t":"Bounds", "href":"https://developers.google.com/maps/documentation/javascript/reference" },
        { "e":"span", "t":"，在塞選(filter)出地圖範圍內的座標點，再依照這些座標點去製作各個 集合 Marker。而後者的 runAll 型態則是當一開始新增玩所有點之後，立即運算出當地圖在各個 zoom 分別的 集合 Marker，當地圖 zoom 大小改變時，則可以立即得找出該 zoom 下的 集合 Marker 顯示。" }
      ]
    },
    { "e":"p", "t":"Type moveRun 當地圖移動時，會重新針對範圍內做計算再合併出 集合 Marker，所以會移除舊的在上新的，整體初始速度較快，但當地圖移動時會有閃娑狀況，反之 runAll 因為開始先算出所有不同 zoom 時要顯示的結果，所以當地圖移動(平滑非放大)時，因為不用移除舊的，所以不會有閃爍狀況發生，但初始速度較慢。" }
  ],
  "r":[
    {
      "e":"ul",
      "s":[
        { "e":"li", "s":[ { "e":"a", "t":"Live Demo", "href":"https://works.ioa.tw/OA-markerClustering/index.html" } ] },
        { "e":"li", "s":[ { "e":"a", "t":"GitHub 原始碼", "href":"https://github.com/comdan66/OA-markerClustering/" } ] },
        { "e":"li", "s":[ { "e":"a", "t":"PTT Soft_Job", "href":"https://www.ptt.cc/bbs/Soft_Job/M.1475629747.A.CC8.html" } ] },
        { "e":"li", "s":[ { "e":"a", "t":"Facebook Front-End Developers Taiwan", "href":"https://www.facebook.com/groups/f2e.tw/permalink/1089454517758579/" } ] },
        { "e":"li", "s":[ { "e":"a", "t":"Facebook JavaScript.tw", "href":"https://www.facebook.com/groups/javascript.tw/permalink/875068025927870" } ] }
      ]
    }
  ],
  "g":[
    "Google Maps",
    "Marker Clustering",
    "JavaScript"
  ]
}