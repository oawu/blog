{
  "title":"macOS 上安裝 PHP 語言",
  "at":"2021-06-02",
  "type":"article",
  "els":[
    {
      "e":"blockquote",
      "class": "info",
      "s":[
        { "e":"span", "t":"請先安裝 " },
        { "e":"a", "t":"Apache", "href":"/?k=mac&id=Apache" }
      ]
    },
    { "e":"h2", "t":"安裝 imagick" },
    {
      "e":"ul",
      "s":[
        {
          "e":"li",
          "s":[
            { "e":"span", "t":"先要安裝 " },
            { "e":"b", "t":"imagemagick" },
            { "e":"span", "t":"，終端機執行指令 " },
            { "e":"code", "t":"brew install imagemagick", "copy":"brew install imagemagick" }
          ]
        }
      ]
    },
    { "e":"h2", "t":"安裝 redis" },
    {
      "e":"ul",
      "s":[
        {
          "e":"li",
          "s":[
            { "e":"span", "t":"先要安裝 " },
            { "e":"b", "t":"redis" },
            { "e":"span", "t":"，終端機執行指令 " },
            { "e":"code", "t":"brew install redis", "copy":"brew install redis" }
          ]
        }
      ]
    },
    { "e":"h2", "t":"安裝各版本的 PHP" },
    { "e":"p", "s":[
      {"e": "span", "t": "請依據自己需求安裝指定的版本，以目前（2023-07-25）來說，安裝 7.3 即可，初次安裝會有點久，請保持網路暢通並且耐心等待安裝 🤪，以下就以 "},
      {"e": "code", "t": "7.3"},
      {"e": "span", "t": " 為範例演示，需要其他版本的話請自行更改版本數字操作！"}
    ] },



    { "e":"h3", "t":"7.3 版本" },
    {
      "e":"ul",
      "s":[

        { "e":"li", "s":[
          { "e":"p", "t":"安裝" },

          {"e": "ul", "s": [
            { "e":"li", "s":[
              { "e":"span", "t":"方法 1（快速），終端機執行以下指令：" },
              { "e":"code",
                "t":   "brew install shivammathur/php/php@7.3 && echo \"\\n# PHP 7.3\\nexport PATH=\\\"\\$PATH:$(brew --prefix)/opt/php@7.3/bin\\\"\\nexport PATH=\\\"\\$PATH:$(brew --prefix)/opt/php@7.3/sbin\\\"\" >> ~/.zshrc && source ~/.zshrc && echo \"\\n# PHP 7.3\\nLoadModule php7_module $(brew --prefix)/opt/php@7.3/lib/httpd/modules/libphp7.so\" >> $(brew --prefix)/etc/httpd/httpd.conf",
                "copy":"brew install shivammathur/php/php@7.3 && echo \"\\n# PHP 7.3\\nexport PATH=\\\"\\$PATH:$(brew --prefix)/opt/php@7.3/bin\\\"\\nexport PATH=\\\"\\$PATH:$(brew --prefix)/opt/php@7.3/sbin\\\"\" >> ~/.zshrc && source ~/.zshrc && echo \"\\n# PHP 7.3\\nLoadModule php7_module $(brew --prefix)/opt/php@7.3/lib/httpd/modules/libphp7.so\" >> $(brew --prefix)/etc/httpd/httpd.conf" }] },

            { "e":"li", "s":[
              { "e":"p", "t":"方法 2" },
              {
                "e":"ul",
                "s":[

                  { "e":"li", "s":[{ "e":"span", "t":"終端機執行指令 " }, { "e":"code",
                    "t":   "brew install shivammathur/php/php@7.3",
                    "copy":"brew install shivammathur/php/php@7.3" }] },

                  { "e":"li", "s":[{ "e":"span", "t":"CLI 新增指令，終端機執行指令 " },
                    { "e":"code",
                      "t"   :"echo \"\\n# PHP 7.3\\nexport PATH=\\\"\\$PATH:$(brew --prefix)/opt/php@7.3/bin\\\"\\nexport PATH=\\\"\\$PATH:$(brew --prefix)/opt/php@7.3/sbin\\\"\" >> ~/.zshrc",
                      "copy":"echo \"\\n# PHP 7.3\\nexport PATH=\\\"\\$PATH:$(brew --prefix)/opt/php@7.3/bin\\\"\\nexport PATH=\\\"\\$PATH:$(brew --prefix)/opt/php@7.3/sbin\\\"\" >> ~/.zshrc" }] },

                  { "e":"li", "s":[{ "e":"span", "t":"重新載入終端機設定，終端機執行指令 " }, { "e":"code", "t":"source ~/.zshrc", "copy":"source ~/.zshrc" }] },
                  { "e":"li", "s":[{ "e":"span", "t":"Apache 加入 Module，終端機執行指令 " }, { "e":"code",
                    "t":   "echo \"\\n# PHP 7.3\\nLoadModule php7_module $(brew --prefix)/opt/php@7.3/lib/httpd/modules/libphp7.so\" >> $(brew --prefix)/etc/httpd/httpd.conf",
                    "copy":"echo \"\\n# PHP 7.3\\nLoadModule php7_module $(brew --prefix)/opt/php@7.3/lib/httpd/modules/libphp7.so\" >> $(brew --prefix)/etc/httpd/httpd.conf" }] }

                ]
              }
            ]}

          ]}
        ] },




        { "e":"li", "s":[{ "e":"p", "t":"安裝 imagick" },
          {"e": "ul", "s": [
            {"e": "li", "s": [{"e": "span", "t": "終端機執行指令 "}, {"e": "code", "t": "pecl install imagick", "copy": "pecl install imagick" }, {"e": "span", "t": "，中間有個 " }, {"e": "code", "t": "Please provide the prefix of Imagemagick installation [autodetect]" }, {"e": "span", "t": "，直接按 " }, {"e": "code", "t": "enter" }] },
            {"e": "li", "s": [{"e": "span", "t": "結果若是失敗如果出現 " }, {"e": "code", "t": "configure: error: Please reinstall the pkg-config distribution" }, {"e": "span", "t": "，那就終端機執行指令" }, {"e": "code", "t": "brew reinstall pkg-config", "copy": "brew reinstall pkg-config" }, {"e": "span", "t": " 後再執行 " }, {"e": "code", "t": "pecl install imagick", "copy": "pecl install imagick" }] },
            {"e": "li", "s": [{"e": "span", "t": "若要檢查是否成功，檢查該版本的 " }, {"e": "code", "t": "php.ini" }] }
          ]}
        ] },
        { "e":"li", "s":[{ "e":"p", "t":"安裝 redis" },
          {"e": "ul", "s": [
            {"e": "li", "s": [{"e": "span", "t": "終端機執行指令 "}, {"e": "code", "t": "pecl install redis", "copy": "pecl install redis" }, {"e": "span", "t": "，中間有個 " }, {"e": "code", "t": "enable igbinary serializer support? [no] :" }, {"e": "span", "t": "、" }, {"e": "code", "t": "enable lzf compression support? [no] :" }, {"e": "span", "t": " 與 " }, {"e": "code", "t": "enable zstd compression support? [no] :" }, {"e": "span", "t": "，都直接按 " }, {"e": "code", "t": "enter" }] },
            {"e": "li", "s": [{"e": "span", "t": "結果若是失敗如果出現 " }, {"e": "code", "t": "configure: error: Please reinstall the pkg-config distribution" }, {"e": "span", "t": "，那就終端機執行指令" }, {"e": "code", "t": "brew reinstall pkg-config", "copy": "brew reinstall pkg-config" }, {"e": "span", "t": " 後再執行 " }, {"e": "code", "t": "pecl install redis", "copy": "pecl install redis" }] },
            {"e": "li", "s": [{"e": "span", "t": "若要檢查是否成功，檢查該版本的 " }, {"e": "code", "t": "php.ini" }] }
          ]}
        ] }
      ]
    },
    { "e":"h2", "t":"設定 Apache 讀取執行 PHP" },
    {
      "e":"ul",
      "s":[
        {
          "e":"li",
          "s":[
            { "e":"p", "s":[
              { "e":"span", "t":"用 Sublime Text 編輯 " },
              { "e":"code", "t":"httpd.conf" },
              { "e":"span", "t":"，終端機執行指令 " },
              { "e":"code",
                "t":   "subl $(brew --prefix)/etc/httpd/httpd.conf",
                "copy":"subl $(brew --prefix)/etc/httpd/httpd.conf" },
              { "e":"span", "t":"，修改 " },
              { "e":"code",
                "t":    "DirectoryIndex",
                "copy": "DirectoryIndex" },
              { "e":"span", "t":" 內容" }
            ] },
            {
              "e":"pre",
              "copy": "<IfModule dir_module>\n  DirectoryIndex index.php index.html\n</IfModule>",
              "s":[
                { "e":"div", "t":"<IfModule dir_module>" },
                { "e":"div", "t":"  DirectoryIndex index.php index.html" },
                { "e":"div", "t":"</IfModule>" }
              ]
            },
            { "e":"p", "s":[
              { "e":"span", "t":"然後在 " },
              { "e":"code", "t":"</IfModule>" },
              { "e":"span", "t":" 後在加入一下內容" }
            ] },
            {
              "e":"pre",
              "copy": "<FilesMatch \\.php$>\n  SetHandler application/x-httpd-php\n</FilesMatch>",
              "s":[
                { "e":"div", "t":"<FilesMatch \\.php$>" },
                { "e":"div", "t":"  SetHandler application/x-httpd-php" },
                { "e":"div", "t":"</FilesMatch>" }
              ]
            }
          ]
        }
      ]
    },
    { "e":"h2", "t":"CLI 指令切換版本" },
    { "e":"p", "t":"如果有安裝各種不同版本，並且要在指令下切換 PHP 版本，可以參考以下步驟：" },
    {
      "e":"ul",
      "s":[
        { "e":"li", "s":[{ "e":"span", "t":"用 Sublime Text 編輯 " }, { "e":"code", "t":".zshrc" }, { "e":"span", "t":"，終端機執行指令 " }, { "e":"code", "t":"subl ~/.zshrc", "copy":"subl ~/.zshrc" }] },
        { "e":"li", "s":[
          {"e":"p","t":"將不使用的版本隱藏，以下為使用 PHP 7.3 的範例樣式"},
          {
            "e":"pre",
            "class":"lines",
            "s":[
              { "e":"div", "t":"# PHP 5.6", "class": "gray" },
              { "e":"div", "t":"# export PATH=\"$PATH:/opt/homebrew/opt/php@5.6/bin\"", "class": "gray" },
              { "e":"div", "t":"# export PATH=\"$PATH:/opt/homebrew/opt/php@5.6/sbin\"", "class": "gray" },
              { "e":"div", "t":" " },
              { "e":"div", "t":"# PHP 7.0", "class": "gray" },
              { "e":"div", "t":"# export PATH=\"$PATH:/opt/homebrew/opt/php@7.0/bin\"", "class": "gray" },
              { "e":"div", "t":"# export PATH=\"$PATH:/opt/homebrew/opt/php@7.0/sbin\"", "class": "gray" },
              { "e":"div", "t":" " },
              { "e":"div", "t":"# PHP 7.1", "class": "gray" },
              { "e":"div", "t":"# export PATH=\"$PATH:/opt/homebrew/opt/php@7.1/bin\"", "class": "gray" },
              { "e":"div", "t":"# export PATH=\"$PATH:/opt/homebrew/opt/php@7.1/sbin\"", "class": "gray" },
              { "e":"div", "t":" " },
              { "e":"div", "t":"# PHP 7.2", "class": "gray" },
              { "e":"div", "t":"# export PATH=\"$PATH:/opt/homebrew/opt/php@7.2/bin\"", "class": "gray" },
              { "e":"div", "t":"# export PATH=\"$PATH:/opt/homebrew/opt/php@7.2/sbin\"", "class": "gray" },
              { "e":"div", "t":" " },
              { "e":"div", "t":"# PHP 7.3", "class": "gray" },
              { "e":"div", "s":[{"e": "span", "t": "export", "class": "red" }, {"e": "span", "t": " PATH" }, {"e": "span", "t": "=", "class": "red" }, {"e": "span", "t": "\"", "class": "yellow" }, {"e": "span", "t": "$PATH" }, {"e": "span", "t": ":/opt/homebrew/opt/php@7.3/bin\"", "class": "yellow" }] },
              { "e":"div", "s":[{"e": "span", "t": "export", "class": "red" }, {"e": "span", "t": " PATH" }, {"e": "span", "t": "=", "class": "red" }, {"e": "span", "t": "\"", "class": "yellow" }, {"e": "span", "t": "$PATH" }, {"e": "span", "t": ":/opt/homebrew/opt/php@7.3/sbin\"", "class": "yellow" }] },
              { "e":"div", "t":" " },
              { "e":"div", "t":"# PHP 7.4", "class": "gray" },
              { "e":"div", "t":"# export PATH=\"$PATH:/opt/homebrew/opt/php@7.4/bin\"", "class": "gray" },
              { "e":"div", "t":"# export PATH=\"$PATH:/opt/homebrew/opt/php@7.4/sbin\"", "class": "gray" },
              { "e":"div", "t":" " },
              { "e":"div", "t":"# PHP 8.0", "class": "gray" },
              { "e":"div", "t":"# export PATH=\"$PATH:/opt/homebrew/opt/php@8.0/bin\"", "class": "gray" },
              { "e":"div", "t":"# export PATH=\"$PATH:/opt/homebrew/opt/php@8.0/sbin\"", "class": "gray" }
            ]
          }
        ] },
        {
          "e":"li",
          "s":[
            { "e":"span", "t":"儲存後，終端機執行指令 " },
            { "e":"code", "t":"source ~/.zshrc", "copy":"source ~/.zshrc" }
          ]
        }
      ]
    },
    { "e":"h2", "t":"Apache 設定" },
    { "e":"p", "t":"如果有安裝各種不同版本，並且要讓 Apache 執行不同的 PHP 版本，可以參考以下步驟：" },
    {
      "e":"ul",
      "s":[
        {
          "e":"li",
          "s":[
            { "e":"span", "t":"用 Sublime Text 編輯 " },
            { "e":"code", "t":"httpd.conf" },
            { "e":"span", "t":"，終端機執行指令 " },
            { "e":"code",
              "t":   "subl $(brew --prefix)/etc/httpd/httpd.conf",
              "copy":"subl $(brew --prefix)/etc/httpd/httpd.conf" }
          ]
        },
        {
          "e":"li",
          "s":[
            { "e":"p", "t":"將不使用的版本隱藏，以下為使用 PHP 7.3 的範例樣式" },
            {
              "e":"pre",
              "class":"lines",
              "s":[
                { "e":"div", "t":"# PHP 5.6", "class": "gray" },
                { "e":"div", "t":"# LoadModule php5_module /opt/homebrew/opt/php@5.6/lib/httpd/modules/libphp5.so", "class": "gray" },
                { "e":"div", "t":" " },
                { "e":"div", "t":"# PHP 7.0", "class": "gray" },
                { "e":"div", "t":"# LoadModule php7_module /opt/homebrew/opt/php@7.0/lib/httpd/modules/libphp7.so", "class": "gray" },
                { "e":"div", "t":" " },
                { "e":"div", "t":"# PHP 7.1", "class": "gray" },
                { "e":"div", "t":"# LoadModule php7_module /opt/homebrew/opt/php@7.1/lib/httpd/modules/libphp7.so", "class": "gray" },
                { "e":"div", "t":" " },
                { "e":"div", "t":"# PHP 7.2", "class": "gray" },
                { "e":"div", "t":"# LoadModule php7_module /opt/homebrew/opt/php@7.2/lib/httpd/modules/libphp7.so", "class": "gray" },
                { "e":"div", "t":" " },
                { "e":"div", "t":"# PHP 7.3", "class": "gray" },
                { "e":"div", "s":[{"e": "span", "t": "LoadModule", "class": "blue" }, {"e": "span", "t": " php7_module /opt/homebrew/opt/php@7.3/lib/httpd/modules/libphp7.so" }] },
                { "e":"div", "t":" " },
                { "e":"div", "t":"# PHP 7.4", "class": "gray" },
                { "e":"div", "t":"# LoadModule php7_module /opt/homebrew/opt/php@7.4/lib/httpd/modules/libphp7.so", "class": "gray" },
                { "e":"div", "t":" " },
                { "e":"div", "t":"# PHP 8.0", "class": "gray" },
                { "e":"div", "t":"# LoadModule php8_module /opt/homebrew/opt/php@8.0/lib/httpd/modules/libphp8.so", "class": "gray" }
              ]
            }
          ]
        },
        {
          "e":"li",
          "s":[
            { "e":"span", "t":"儲存後，重啟 Apache，終端機執行指令 " },
            { "e":"code", "t":"brew services restart httpd", "copy":"brew services restart httpd" }
          ]
        }
      ]
    },
    { "e":"h2", "t":"安裝 Composer 套件管理" },


    {
      "e":"ul",
      "s":[
        { "e":"li", "s":[
          { "e":"span", "t":"方法 1（快速），終端機執行以下指令：" },
          { "e":"code",
            "t":   "cd /tmp && php -r \"readfile('https://getcomposer.org/installer');\" > composer-setup.php && php composer-setup.php && php -r \"unlink('composer-setup.php');\" && mv composer.phar ~/bin/composer && composer -v",
            "copy":"cd /tmp && php -r \"readfile('https://getcomposer.org/installer');\" > composer-setup.php && php composer-setup.php && php -r \"unlink('composer-setup.php');\" && mv composer.phar ~/bin/composer && composer -v" }] },

        { "e":"li", "s":[
          { "e":"p", "t":"方法 2" },
          {
            "e":"ul",
            "s":[
              {
                "e":"li",
                "s":[
                  { "e":"span", "t":"終端機執行指令 " },
                  { "e":"code",
                    "t":   "cd /tmp",
                    "copy":"cd /tmp" }
                ]
              },
              {
                "e":"li",
                "s":[
                  { "e":"span", "t":"終端機執行指令 " },
                  { "e":"code",
                    "t":   "php -r \"readfile('https://getcomposer.org/installer');\" > composer-setup.php",
                    "copy":"php -r \"readfile('https://getcomposer.org/installer');\" > composer-setup.php" }
                ]
              },
              {
                "e":"li",
                "s":[
                  { "e":"span", "t":"終端機執行指令 " },
                  { "e":"code", 
                    "t":   "php composer-setup.php",
                    "copy":"php composer-setup.php" }
                ]
              },
              {
                "e":"li",
                "s":[
                  { "e":"span", "t":"終端機執行指令 " },
                  { "e":"code", 
                    "t":   "php -r \"unlink('composer-setup.php');\"",
                    "copy":"php -r \"unlink('composer-setup.php');\"" }
                ]
              },
              {
                "e":"li",
                "s":[
                  { "e":"span", "t":"終端機執行指令 " },
                  { "e":"code", 
                    "t":   "mv composer.phar ~/bin/composer",
                    "copy":"mv composer.phar ~/bin/composer" }
                ]
              },
              {
                "e":"li",
                "s":[
                  { "e":"span", "t":"檢查是否安裝成功，重新開啟終端機，執行指令 " },
                  { "e":"code", 
                    "t":   "composer -v",
                    "copy":"composer -v" }
                ]
              }
            ]
          }
        ]}
      ]
    },

        
    { "e":"h2", "t":"安裝 Deployer 部署器" },

    {
      "e":"ul",
      "s":[
        { "e":"li", "s":[
          { "e":"span", "t":"方法 1（快速），終端機執行以下指令：" },
          { "e":"code",
            "t":   "cd /tmp && curl -LO https://deployer.org/deployer.phar && mv deployer.phar ~/bin/dep && chmod +x ~/bin/dep && dep -v",
            "copy":"cd /tmp && curl -LO https://deployer.org/deployer.phar && mv deployer.phar ~/bin/dep && chmod +x ~/bin/dep && dep -v" }] },

        { "e":"li", "s":[
          { "e":"p", "t":"方法 2" },
          {
            "e":"ul",
            "s":[
              {
                "e":"li",
                "s":[
                  { "e":"span", "t":"終端機執行指令 " },
                  { "e":"code",
                    "t":   "cd /tmp",
                    "copy":"cd /tmp" }
                ]
              },
                {
                  "e":"li",
                  "s":[
                    { "e":"span", "t":"終端機執行指令 " },
                    { "e":"code",
                      "t":   "curl -LO https://deployer.org/deployer.phar",
                      "copy":"curl -LO https://deployer.org/deployer.phar" }
                  ]
                },
                {
                  "e":"li",
                  "s":[
                    { "e":"span", "t":"終端機執行指令 " },
                    { "e":"code",
                      "t":   "mv deployer.phar ~/bin/dep",
                      "copy":"mv deployer.phar ~/bin/dep" }
                  ]
                },
                {
                  "e":"li",
                  "s":[
                    { "e":"span", "t":"終端機執行指令 " },
                    { "e":"code",
                      "t":   "chmod +x ~/bin/dep",
                      "copy":"chmod +x ~/bin/dep" }
                  ]
                },
                {
                  "e":"li",
                  "s":[
                    { "e":"span", "t":"檢查是否安裝成功，重新開啟終端機，執行指令 " },
                    { "e":"code",
                      "t":   "dep -v",
                      "copy":"dep -v" }
                  ]
                }
            ]
          }
        ]}
      ]
    },

    { "e":"h2", "t":"重點整理" },
    {
      "e":"ul",
      "s":[
        

        {
          "e":"li",
          "s":[
            { "e":"p", "s":[
              {"e": "span", "t": ".ini 檔案位置，以 PHP 7.3 版本為例，位置在 " },
              { "e":"code",
                "t":   "$(brew --prefix)/etc/php/7.3/php.ini",
                "copy":"$(brew --prefix)/etc/php/7.3/php.ini" }
            ] }
          ]
        },

        {
          "e":"li",
          "s":[
            { "e":"span", "t":"CLI 要切換版本的話，就用 Sublime Text 編輯 " },
            { "e":"code", "t":".zshrc" },
            { "e":"span", "t":"，終端機執行指令 " },
            { "e":"code", "t":"subl ~/.zshrc", "copy":"subl ~/.zshrc" },
            { "e":"span", "t":"，把要執行的版本註解拿掉，其他不使用的版本註解，儲存後終端機執行指令 " },
            { "e":"code", "t":"source ~/.zshrc", "copy":"source ~/.zshrc" }
          ]
        },

        {
          "e":"li",
          "s":[
            { "e":"span", "t":"Apache 若要更換版本，就用 Sublime Text 編輯 " },
            { "e":"code", "t":"httpd.conf" },
            { "e":"span", "t":"，終端機執行指令 " },
            { "e":"code", "t":"subl $(brew --prefix)/etc/httpd/httpd.conf", "copy":"subl $(brew --prefix)/etc/httpd/httpd.conf" },
            { "e":"span", "t":"，把要執行的版本註解拿掉，其他不使用的版本註解，儲存後重啟 Apache，終端機執行指令 " },
            { "e":"code", "t":"brew services restart httpd", "copy":"brew services restart httpd" }
          ]
        }
      ]
    }
  ],
  "r":[
    {
      "e":"ul",
      "s":[
        {
          "e":"li",
          "s":[
            { "e":"a", "t":"macOS 13.0 Ventura Apache Setup: Multiple PHP Versions | Grav CMS", "href":"https://getgrav.org/blog/macos-ventura-apache-multiple-php-versions" }
          ]
        },
        {
          "e":"li",
          "s":[
            { "e":"a", "t":"macOS 11.0 Big Sur Apache Setup: Multiple PHP Versions | Grav CMS", "href":"https://getgrav.org/blog/macos-bigsur-apache-multiple-php-versions" }
          ]
        },
        {
          "e":"li",
          "s":[{ "e":"a", "t":"Youtube 影音教學版", "href":"https://www.youtube.com/watch?v=AV_6pXd-Crk" }]
        }
      ]
    }
  ],
  "g":[
    "PHP",
    "後端"
  ]
}