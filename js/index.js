"use strict";function ownKeys(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function _objectSpread(a){for(var b,c=1;c<arguments.length;c++)b=null==arguments[c]?{}:arguments[c],c%2?ownKeys(Object(b),!0).forEach(function(c){_defineProperty(a,c,b[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(b)):ownKeys(Object(b)).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c))});return a}function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}/**
 * @author      OA Wu <oawu.tw@gmail.com>
 * @copyright   Copyright (c) 2015 - 2022, Lalilo
 * @license     http://opensource.org/licenses/MIT  MIT License
 * @link        https://www.ioa.tw/
 */Params({k:"index",id:null}),Vue.component("el",{props:{el:{type:Object,required:!0}},methods:{copy:function copy(a,b){var c=document.createElement("textarea");c.className="copy",c.value=b,document.body.appendChild(c),c.select();try{document.execCommand("copy"),Toastr.success("\u8907\u88FD\u6210\u529F\uFF01","code"==a?b:"")}catch(a){Toastr.failure("\u8907\u88FD\u5931\u6557\u2026")}document.body.removeChild(c)}},computed:{attr:function(){var a=this.el["class"]||null;a=a?{class:a}:{};var b=this.el.href||null;b=b?{href:b,target:"_blank"}:{};var c=this.el.src||null;c=c?{src:"/blog"+c}:{};var d=this.el.alt||null;d=d?{alt:d}:{};var e=this.el.attr||null;return e=e?_objectSpread({},e):{},_objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread({},e),a),b),c),d),e)}},template:El.render("\n    figure => *if=el.e=='img'   *bind=attr\n      img => *bind=attr\n\n    pre => *else-if=el.e=='pre'   *bind=attr   :is=el.e\n      label => *if=el.copy   @click=copy(el.e, el.copy)\n      div => *if=el.s\n        el => *for=(el, i) in el.s   :key=i   :el=el\n      div => *else   *text=el.t\n\n    component => *else-if=el.s   *bind=attr   :is=el.e\n      el => *for=(el, i) in el.s   :key=i   :el=el\n    component => *else-if=el.copy   *text=el.t   *bind=attr   :is=el.e   @click=copy(el.e, el.copy)   :copy=true\n    component => *else   *text=el.t   *bind=attr   :is=el.e\n    ")}),Vue.component("main-article",{props:{article:{type:Object,required:!0}},template:El.render("\n    article#article\n      header\n        h1 => *text=article.title\n        span => *text=article.subtitle   *if=article.subtitle\n\n      section\n        el => *for=(el, i) in article.els   :key=i   :el=el\n\n        template => *if=article.r.length\n          h2 => *text='\u76F8\u95DC\u53C3\u8003'\n          el => *for=(el, i) in article.r   :key=i   :el=el\n\n      div#prev-next => *if=article.other   :class='n' + Object.keys(article.other).length\n        a.icon-a.prev => *if=article.other.prev   :href=article.other.prev.url\n          span => *text='\u4E0A\u4E00\u7BC7'\n          b => *text=article.other.prev.title\n        a.icon-b.next => *if=article.other.next   :href=article.other.next.url\n          span => *text='\u4E0B\u4E00\u7BC7'\n          b => *text=article.other.next.title\n      \n      footer\n        time => *text=Datetime(article.at).ago   :datetime=Datetime(article.at)\n      ")}),Vue.component("main-articles",{props:{title:{type:String,required:!0},articles:{type:Array,required:!0}},template:El.render("\n    div#articles\n      header\n        h1 => *text=title\n\n      div.articles\n        a => *for=(article, i) in articles   :key=i   :href=article.url\n          b => *text=article.title\n          span => *if=article.subtitle   *text=article.subtitle")}),Vue.component("main-albums",{props:{title:{type:String,required:!0},albums:{type:Array,required:!0}},template:El.render("\n    div#albums\n      header\n        h1 => *text=title\n\n      div.albums\n        a => *for=(album, i) in albums   :key=i   :href=album.url\n          b => *text=album.title\n          span => *if=album.subtitle   *text=album.subtitle")}),Vue.component("loading",{props:{text:{type:String,default:"\u8B80\u53D6\u4E2D\uFF0C\u8ACB\u7A0D\u5019\u2026",required:!0}},template:El.render("\n    div#loading\n      div.activity\n        i => *for=i in [0, 1, 2, 3, 4, 5, 6, 7]   :class='n' + i\n      span => *text=text")}),Vue.component("p404",{template:El.render("\n    div#p404\n      i.icon-1d\n      b    => *text='404'\n      span => *text='\u60A8\u8981\u627E\u7684\u9801\u9762\u597D\u50CF\u4E0D\u898B\u60F9\u2026'\n      p\n        span         => *text='\u5EFA\u8B70\u60A8\u56DE'\n        a.icon-d     => *text='\u9996\u9801'   :href='/'\n        // span         => *text='\uFF0C\u6216\u8005'\n        // label.icon-1 => *text='\u641C\u5C0B'\n        span         => *text='\u5427\uFF01'")}),Vue.component("toastr",{data:function data(){return{toastrs:Toastr.items}},template:El.render("\n    div#toastr => *if=toastrs.length\n      div.toastr => *for=(item, i) in toastrs   :key=item._id   :class=item.type\n        b => *if=item.title   *text=item.title\n        span => *if=item.content   *text=item.content\n        label.icon-c => @click=Toastr.close(item)\n        i")}),Load.init({data:{main:null,is404:!1,on:!1,title:"OA Wu's Blog",item:null,items:[{key:"index",icon:"d",title:"\u500B\u4EBA\u7C21\u4ECB",subtitle:0},{key:"dev",icon:"e",title:"\u958B\u767C\u5FC3\u5F97",subtitle:0},{key:"mac",icon:"1b",title:"\u860B\u679C\u74B0\u5883",subtitle:0},{key:"aws",icon:"22",title:"AWS\u7B46\u8A18",subtitle:0},{key:"rpi",icon:"29",title:"\u6A39\u8393\u6D3E",subtitle:0},{key:"note",icon:"1e",title:"\u96A8\u7B46\u96DC\u8A18",subtitle:0},{key:"mazu",icon:"1a",title:"\u9109\u571F\u5317\u6E2F",subtitle:0},{key:"unbox",icon:"f",title:"\u958B\u7BB1\u6587\u7AE0",subtitle:0},// { key: 'album',   icon: '14', title: '生活相簿', subtitle: 0 },
{key:"license",icon:"16",title:"\u6388\u6B0A\u8072\u660E",subtitle:0}]},mounted:function mounted(){this.load(this.items.map(function(a){return a.url="index"+EXT+"?k="+a.key,a}).filter(function(a){var b=a.key;return Params.k===b}).shift()||this.items[0])},methods:{load:function load(a){var b=this;API.Q.enqueue(function(c){return c(b.item=a)}).enqueue(function(a){return API.GET("/blog/api/"+b.item.key+".json").fail(function(){return b.is404=!0}).done(a)}).enqueue(function(a,c){if(!c.items)return a(c);var d=c.items.map(function(a){return a.url="/blog/index"+EXT+"?k="+b.item.key+"&id="+a.id,a}).map(function(a){var b=a.id;return b}).indexOf(decodeURI(Params.id));if(-1==d)return a(c,Params.id&&Toastr.failure("\u627E\u4E0D\u5230\u8CC7\u6599\uFF01"));var e=c.items[d],f=0==d?null:c.items[d-1],g=d==c.items.length-1?null:c.items[d+1],h={};return f&&(h.prev=f),g&&(h.next=g),e?API.GET("/blog/api/"+b.item.key+"/"+e.id+".json").done(function(b){return a(_objectSpread(_objectSpread({},b),{},{other:h}))}).fail(function(){return a(c,Toastr.failure("\u627E\u4E0D\u5230\u8CC7\u6599\uFF01"))}):a(c)}).enqueue(function(a,c){return a(b.main=c)}).enqueue(function(a){return a(b.items.forEach(function(a){return API.GET("/blog/api/"+a.key+".json").done(function(b){var c=b.items,d=void 0===c?0:c;return a.subtitle=d&&d.length}).send()}))})}},template:El.render("\n    main#app\n      toastr\n\n      div#menu => :class={ on: on }\n        a => *for=t in items   :key=t.k   :class=['icon-' + t.icon, { active: item === t }]   :href=t.url\n          span => *text=t.title   :text=t.subtitle\n\n      header#header\n        label.icon-0 => @click=on=true\n        span => *text=title\n\n      label#cover => *if=on   @click=on=false\n\n      div#main\n        p404 => *if=is404\n\n        template => *else\n          loading => *if=!main\n\n          template => *else\n            main-articles => *if=main.type=='articles'   :title=main.title   :articles=main.items\n            main-article  => *if=main.type=='article'    :article=main\n            main-albums   => *if=main.type=='albums'     :title=main.title   :albums=main.items\n  ")});